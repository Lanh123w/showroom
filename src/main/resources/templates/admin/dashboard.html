<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard Qu·∫£n tr·ªã</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<div class="container mt-5">
    <div id="loginSuccess">
      <h2 class="text-center">üéØ Ch√†o m·ª´ng ƒë·∫øn trang qu·∫£n tr·ªã</h2>
      <p class="text-center">B·∫°n ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng.</p>
    </div>
  </div>  
<body class="bg-light">
  <div class="container mt-2">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark rounded px-3">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav mx-auto">
          <div class="text-white ms-auto" th:if="${session.admin != null}">
            üëã Xin ch√†o, <strong th:text="${session.admin.username}">Admin</strong>
          </div>
  
          <li class="nav-item"><a class="nav-link" href="/">Trang ch·ªß</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/promotion-form">Ch·ªânh s·ª≠a khuy·∫øn m√£i</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/news-form">Ch·ªânh s·ª≠a tin t·ª©c</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/banners">Ch·ªânh banner</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/create-account">T·∫°o t√†i kho·∫£n</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/change-password">ƒê·ªïi m·∫≠t kh·∫©u</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/accounts">Danh s√°ch t√†i kho·∫£n</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/services">Qu·∫£n l√≠ d·ªãch v·ª•</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/categories">Danh s√°ch lo·∫°i xe</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/colors">Ch·ªânh s·ª≠a m√†u xe</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/bookings">Danh s√°ch ƒë·∫∑t l·ªãch</a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/test-drive/list">Y√™u c·∫ßu l√°i th·ª≠</a></li>
        </ul>
      </div>
    </nav>
  </div>
  
      <div class="container mt-5">
        <div th:if="${message}" class="alert alert-success text-center">
          <span th:text="${message}">Thao t√°c th√†nh c√¥ng!</span>
        </div>
<div class="container py-4">
    <h2 class="mb-4 text-center text-primary">üìã Dashboard Qu·∫£n tr·ªã City Ford</h2>


    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-dark text-white">
          <h5 class="mb-0">üöó Th√™m xe m·ªõi</h5>
        </div>
        <div class="card-body">
          <form th:action="@{/admin/add-car}" method="post" enctype="multipart/form-data" class="row g-3">
            
            <div class="col-md-4">
              <label for="name" class="form-label">T√™n xe</label>
              <input name="name" id="name" class="form-control" placeholder="T√™n xe" required>
            </div>
      
            <div class="col-md-4">
              <label for="model" class="form-label">Model</label>
              <input name="model" id="model" class="form-control" placeholder="Model" required>
            </div>
      
            <div class="col-md-4">
              <label for="category" class="form-label">Ph√¢n lo·∫°i xe</label>
              <select name="category.id" id="category" class="form-select" required>
                <option value="">-- Ch·ªçn ph√¢n lo·∫°i xe --</option>
                <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
              </select>
            </div>
      
            <div class="col-md-2">
              <label for="year" class="form-label">NƒÉm s·∫£n xu·∫•t</label>
              <input name="year" id="year" type="number" class="form-control" placeholder="NƒÉm" required>
            </div>
      
            <div class="col-md-2">
              <label for="price" class="form-label">Gi√° b√°n</label>
              <input name="price" id="price" type="number" class="form-control" placeholder="Gi√°" required>
            </div>
      
            <div class="col-md-8">
              <label for="description" class="form-label">M√¥ t·∫£ xe</label>
              <textarea name="description" id="description" class="form-control auto-expand" rows="3"
                        placeholder="Nh·∫≠p m√¥ t·∫£ chi ti·∫øt..." oninput="autoResize(this)"></textarea>
            </div>
      
            <div class="col-md-6 mt-3">
              <label for="imageFile" class="form-label">·∫¢nh xe</label>
              <input name="imageFile" id="imageFile" type="file" class="form-control" required>
            </div>
      
            <div class="col-md-6 mt-3 text-end align-self-end">
              <button type="submit" class="btn btn-success">üíæ Th√™m xe</button>
              <a th:href="@{/admin/cars}" class="btn btn-outline-secondary ms-2">‚Üê Quay l·∫°i</a>
            </div>
          </form>
        </div>
      </div>

<div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">üì¶ Danh s√°ch xe</h5>
    </div>
    <div class="card-body">
        <div th:each="car : ${cars}" class="border-bottom py-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="fw-bold" th:text="${car.name} + ' - ' + ${car.model}"></span>
                <div>
                    <a th:href="@{'/admin/edit-car/' + ${car.id}}" class="btn btn-sm btn-warning me-2">S·ª≠a</a>
                    <a th:href="@{'/admin/delete-car/' + ${car.id}}" class="btn btn-sm btn-danger">X√≥a</a>
                </div>
            </div>
            <div class="text-muted mt-1" th:text="${car.description}">M√¥ t·∫£ xe</div>
        </div>
    </div>
</div>


<div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">‚öôÔ∏è C·∫•u h√¨nh website</h5>
    </div>
    <div class="card-body">
        <form th:action="@{/admin/update-settings}" method="post" enctype="multipart/form-data" class="row g-3">
            <input type="hidden" name="id" value="1">

            <div class="col-md-6">
                <label class="form-label">Hotline</label>
                <input name="hotline" class="form-control" th:value="${settings.hotline}">
            </div>
            <div class="col-md-6">
                <label class="form-label">Email</label>
                <input name="email" class="form-control" th:value="${settings.email}">
            </div>
            <div class="col-md-12">
                <label class="form-label">ƒê·ªãa ch·ªâ</label>
                <input name="address" class="form-control" th:value="${settings.address}">
            </div>
            <div class="col-md-6">
                <label class="form-label">Zalo</label>
                <input name="zalo" class="form-control" th:value="${settings.zalo}">
            </div>
            <div class="col-md-6">
                <label class="form-label">Website</label>
                <input name="website" class="form-control" th:value="${settings.website}">
            </div>
            <div class="col-md-6">
                <label class="form-label">Facebook</label>
                <input name="facebook" class="form-control" th:value="${settings.facebook}" placeholder="https://facebook.com/yourpage">
            </div>
            <div class="col-md-6">
                <label class="form-label">Logo</label>
                <input name="logoFile" type="file" class="form-control">
            </div>
            <div class="col-md-12">
                <label class="form-label">Footer</label>
                <textarea name="footerText" class="form-control" rows="2" th:text="${settings.footerText}"></textarea>
            </div>
            <div class="col-md-12">
                <label class="form-label">Gi·ªõi thi·ªáu</label>
                <textarea name="aboutContent" class="form-control" rows="4" th:text="${settings.aboutContent}"></textarea>
            </div>
            <div class="col-md-12 text-end">
                <button type="submit" class="btn btn-primary">üíæ L∆∞u c·∫•u h√¨nh</button>
            </div>
        </form>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
<script>
    setTimeout(function () {
      const msg = document.getElementById("loginSuccess");
      if (msg) {
        msg.style.display = "none";
      }
    }, 5000); // 5000ms = 5 gi√¢y
  </script>
     <script>
        function autoResize(textarea) {
          textarea.style.height = 'auto';
          textarea.style.height = textarea.scrollHeight + 'px';
        }
      </script>